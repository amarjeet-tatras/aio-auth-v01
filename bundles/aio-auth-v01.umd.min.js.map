{"version":3,"sources":["ng://aio-auth-v01/lib/auth-config.ts","ng://aio-auth-v01/lib/_services/authentication.service.ts","ng://aio-auth-v01/lib/aio-auth-v01.service.ts","ng://aio-auth-v01/lib/aio-auth-v01.component.ts","ng://aio-auth-v01/lib/_helpers/jwt.interceptor.ts","ng://aio-auth-v01/lib/_helpers/error.interceptor.ts","ng://aio-auth-v01/lib/login/login.component.ts","node_modules/tslib/tslib.es6.js","ng://aio-auth-v01/lib/register/register.component.ts","ng://aio-auth-v01/lib/_helpers/must-match.validator.ts","ng://aio-auth-v01/lib/_services/user.ts","ng://aio-auth-v01/lib/fblogin/fblogin.component.ts","ng://aio-auth-v01/lib/gmaillogin/gmaillogin.component.ts","ng://aio-auth-v01/lib/log-out/log-out.component.ts","ng://aio-auth-v01/lib/insta-login/insta-login.component.ts","ng://aio-auth-v01/lib/ion-login/ion-login.component.ts","ng://aio-auth-v01/lib/ion-reg/ion-reg.component.ts","ng://aio-auth-v01/lib/aio-auth-v01.module.ts","ng://aio-auth-v01/lib/_guards/auth.guard.ts"],"names":["AuthConfigService","InjectionToken","AuthenticationService","Object","defineProperty","prototype","this","currentUserSubject","value","login","username","password","_this","http","post","authconfig","ApiURL","pipe","tap","user","localStorage","setItem","JSON","stringify","next","error","throwError","FBlogin","data","email","id","logout","removeItem","register","firstName","lastName","provider","photoURL","checkEmailExis","resp","fbRegister","getInstaUserData","AccessToken","get","Injectable","args","providedIn","HttpClient","Inject","BehaviorSubject","parse","getItem","currentUser","asObservable","AioAuthV01Service","authSer","currentUserValue","getLoginRedirect","authConfig","AfterLoginURL","fbProvider","GmProvider","AioAuthV01Component","ngOnInit","Component","selector","template","JwtInterceptor","intercept","request","authenticationService","token","clone","setHeaders","Authorization","handle","ErrorInterceptor","catchError","err","console","log","status","router","navigate","message","statusText","Router","LoginComponent","showLogin","loginForm","formBuilder","group","Validators","required","returnUrl","route","snapshot","queryParams","controls","onSubmit","submitted","invalid","loading","f","first","subscribe","FormBuilder","ActivatedRoute","Input","regURL","registerURL","loginBtnText","RegBtnText","heading","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","create","__generator","thisArg","body","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","step","op","TypeError","call","done","pop","length","push","e","RegisterComponent","registerForm","userExist","errorCode","custClass","frmShow","fb","minLength","maxLength","confirmPassword","validator","MustMatch","controlName","matchingControlName","formGroup","control","matchingControl","errors","mustMatch","setErrors","isEmailUnique","__awaiter","_arguments","P","generator","Promise","resolve","reject","fulfilled","rejected","result","then","apply","curEmail","debounceTime","distinctUntilChanged","_a","loginURL","regSuccessMsg","SocialUser","FbloginComponent","ngAfterViewInit","$fbProvider","FBProvider","fbAsyncInit","FB","init","appId","autoLogAppEvents","cookie","xfbml","version","js","fjs","document","getElementsByTagName","getElementById","createElement","async","src","parentNode","insertBefore","fbLogin","getFbUserData","catch","response","authResponse","authResponse_2","api","locale","fields","fbUser","first_name","last_name","authToken","accessToken","facebook","scope","btnText","GmailloginComponent","initialize","loadScript","onload","inner_text_content","signInJS","text","head","appendChild","signInWithGoogle","_this_1","gapi","auth2","getAuthInstance","isSignedIn","signIn","users","profile","getGoogleProfile","getBasicProfile","getId","getEmail","getImageUrl","getGivenName","getFamilyName","idToken","clientSecretId","gmailProvider","G_ApiKey","gmailAPIKey","load","apiKey","clientId","LogOutComponent","signOut","InstaLoginComponent","IGClientid","IGRedirectURL","instaSignIn","authenticateInstagram","instagramClientId","instagramRedirectUri","that","popupLeft","window","screen","width","popupTop","height","popup","open","location","hash","interval","setInterval","clearInterval","slice","close","login_callback","evt","profile_1","fullName","full_name","split","profile_picture","tslib_1.__extends","IonLoginComponent","_super","IonRegComponent","AioAuthV01Module","forRoot","config","ngModule","providers","provide","useValue","NgModule","declarations","imports","CommonModule","FormsModule","ReactiveFormsModule","HttpClientModule","RouterModule","IonicModule","HTTP_INTERCEPTORS","useClass","multi","exports","AuthGuard","canActivate","state","url"],"mappings":"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","sourcesContent":["import { InjectionToken } from '@angular/core';\n\n// first define an interface for our configuration\nexport interface AuthConfig {\n  gmailProvider: string; \n  gmailAPIKey: string;\n  FBProvider: string;\n  AfterLoginURL: string;\n  loginURL: string;\n  registerURL: string;\n  forgetPwdURL: string;\n  ApiURL: string;\n  IGClientid: string;\n  IGRedirectURL: string;\n  regSuccessMsg :string;\n}\n\n// then define injectionToken\nexport const AuthConfigService = new InjectionToken<AuthConfig>(\n  'AuthConfig'\n);\n","import { Injectable, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject, Observable, throwError } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { User } from '../_models/user';\nimport { AuthConfig, AuthConfigService } from '../auth-config';\n//import { AioAuthV01Service } from '../aio-auth-v01.service';\n \n\n@Injectable({ providedIn: 'root' })\nexport class AuthenticationService {\n    private currentUserSubject: BehaviorSubject<User>;\n    public currentUser: Observable<User>;\n\n    constructor(private http: HttpClient,  @Inject(AuthConfigService) private authconfig: AuthConfig) {\n        this.currentUserSubject = new BehaviorSubject<User>(JSON.parse(localStorage.getItem('currentUser')));\n        this.currentUser = this.currentUserSubject.asObservable();\n        \n    }\n\n    public get currentUserValue(): User {\n        return this.currentUserSubject.value;\n    }\n \n    /**\n     * validate username and password \n     * @method: login\n     * @input: username & password\n     * @output: Users data object      * \n     */\n\n    login(username: string, password: string) {\n       \n       return this.http.post<any>(this.authconfig.ApiURL+'/users/authenticate', { username, password })\n            .pipe( tap( // Log the result or error\n                user => {\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    this.currentUserSubject.next(user);\n                    return user; \n                },\n                error => {\n                    throwError(error);\n                }\n              ));\n\n    }\n\n    /**\n     * Facebook Login\n     */\n    FBlogin( data : any ){\n        var username = data.email;\n        var password = data.id;\n        return this.http.post<any>(this.authconfig.ApiURL+'/users/authenticate', { username, password })\n            .pipe( tap( // Log the result or error\n                user => {\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    this.currentUserSubject.next(user);\n                    return user; \n                },\n                error => {\n                    throwError(error);\n                }\n              ));\n    }\n\n    logout() {\n        // remove user from local storage to log user out\n        localStorage.removeItem('currentUser');\n        this.currentUserSubject.next(null);\n    }\n    \n    /**\n     * @method: register()\n     * @input: user data in Object\n     * @output: boolean  \n     */\n    register(firstName, lastName, email, password, provider, photoURL){\n        \n        return this.http.post<any>(this.authconfig.ApiURL+'/users/register', { username: email, password: password, firstName: firstName, lastName: lastName, provider: provider, photoURL: photoURL })\n        .pipe( tap(\n            user => {               \n                return user; \n            },\n            error => {                \n                throwError(error);\n            }\n          ));\n\n    }\n\n    /**\n     * check email existance\n     * @input: email\n     * @output: object\n     */\n    checkEmailExis(email){  \n        return this.http.post<any>(this.authconfig.ApiURL+'/users/auth', { email: email })\n        .pipe( tap(\n            resp => {             \n                return resp; \n            },\n            error => { \n                throwError(error);\n            }\n          ));\n    }\n\n    /**\n     * Facebook Registration/login\n     */\n    fbRegister(data : any){\n         \n        return this.http.post<any>(this.authconfig.ApiURL+'/users/register', { username: data.email, password: data.id, firstName: data.firstName, lastName: data.lastName, provider: data.provider, photoURL: data.photoURL })\n        .pipe( tap(\n            user => {               \n                return user; \n            },\n            error => {                \n                throwError(error);\n            }\n          ));\n    }\n\n    /**\n     * Get Instagram User Data\n     * @input: auth token id\n     * @output: object\n     */\n    getInstaUserData(AccessToken){ \n        return this.http.get<any>('https://api.instagram.com/v1/users/self/?access_token='+AccessToken) .pipe( tap(\n            user => {               \n                return user; \n            },\n            error => {                \n                throwError(error);\n            }\n          ));\n    }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport { AuthConfig, AuthConfigService } from './auth-config';\nimport { AuthenticationService } from './_services/authentication.service';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class AioAuthV01Service {\n  \n  static fbProvider = '';\n  static GmProvider = 'default';\n  \n  constructor(@Inject(AuthConfigService) private authConfig: AuthConfig,  private authSer: AuthenticationService) {}\n   \n\n  /**\n   * Method to get the login status\n   * \n   */\n  public get isLogin(){\n    return this.authSer.currentUserValue;\n  }\n\n  // path to redirect after login\n  getLoginRedirect(){\n    return this.authConfig.AfterLoginURL;\n  } \n}\n","import { Component, OnInit } from '@angular/core';\n\n\n@Component({\n  selector: 'lib-aio-auth-v01',\n  template: `\n    <p>\n      aio-auth-v01 works!\n    </p>\n  `,\n  styles: []\n})\nexport class AioAuthV01Component implements OnInit {\n\n  constructor( ) { }\n\n  ngOnInit() {\n  } \n}\n","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { AuthenticationService } from '../_services/authentication.service';\n\n@Injectable()\nexport class JwtInterceptor implements HttpInterceptor {\n    constructor(private authenticationService: AuthenticationService) { }\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        // add authorization header with jwt token if available\n       \n        let currentUser = this.authenticationService.currentUserValue;\n        if (currentUser && currentUser.token) {\n            request = request.clone({\n                setHeaders: {\n                    Authorization: `Bearer ${currentUser.token}`\n                }\n            });\n        }\n        //console.log('clone header'+JSON.stringify(request))\n        return next.handle(request);\n    }\n}","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { Router } from '@angular/router';\n\nimport { AuthenticationService } from '../_services/authentication.service';\n\n@Injectable()\nexport class ErrorInterceptor implements HttpInterceptor {\n    constructor(private authenticationService: AuthenticationService, private router: Router) { }\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n       \n        return next.handle(request).pipe(catchError(err => {\n            console.log(err)\n            if (err.status === 401) {\n                // auto logout if 401 response returned from api\n                this.authenticationService.logout();                \n                this.router.navigate(['/']);\n            }\n            const error = err.error.message || err.statusText;\n           \n            return throwError(error);\n        }))\n    }\n}","import { Component, OnInit, Inject, Input } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport { AuthenticationService } from '../_services/authentication.service';\nimport { AuthConfig, AuthConfigService } from '../auth-config';\n\n@Component({\n  selector: 'td-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\n\nexport class LoginComponent implements OnInit {\n    public loginForm: FormGroup;\n    public loading = false;\n    public submitted = false;\n    public returnUrl: string;\n    public error = '';\n    public showLogin: Boolean = true;\n    public currentUser: any;\n    \n    public regURL: string = (this.authconfig.registerURL) ? this.authconfig.registerURL :'register';\n    \n    \n\n    @Input() loginBtnText: String = 'Login';\n    @Input() RegBtnText: String = 'Register';\n    @Input() heading: String = 'Sign In';\n\n\n    constructor(\n        public formBuilder: FormBuilder,\n        public route: ActivatedRoute,\n        public router: Router,\n        public authenticationService: AuthenticationService,\n        @Inject(AuthConfigService) public authconfig: AuthConfig\n    ) { }\n\n    ngOnInit() {\n\n        if(this.authenticationService.currentUserValue){\n            this.showLogin = false;\n            this.currentUser = this.authenticationService.currentUserValue;            \n        }\n\n        this.loginForm = this.formBuilder.group({\n            username: ['', Validators.required],\n            password: ['', Validators.required]\n        });\n\n        // reset login status\n       // this.authenticationService.logout();\n\n        // get return url from route parameters or default to '/'\n        this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || this.authconfig.AfterLoginURL;\n    }\n\n    // convenience getter for easy access to form fields\n    get f() { return this.loginForm.controls; }\n\n    onSubmit() {\n        this.submitted = true;\n\n        // stop here if form is invalid\n        if (this.loginForm.invalid) {\n            return;\n        }\n\n        this.loading = true;\n        this.authenticationService.login(this.f.username.value, this.f.password.value)\n            .pipe(first())\n            .subscribe(\n                data => {\n                    this.router.navigate([this.returnUrl]);\n                },\n                error => {\n                    console.log(error)\n                    this.error = error;\n                    this.loading = false;\n                });\n    }\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Component, OnInit, Input, Inject } from '@angular/core';\nimport { FormBuilder,Validators, FormGroup} from '@angular/forms';\nimport { MustMatch } from '../_helpers/must-match.validator';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { first, debounceTime, distinctUntilChanged, mergeMap, delay } from 'rxjs/operators';\nimport { AuthenticationService } from '../_services/authentication.service';\nimport { AuthConfig, AuthConfigService } from '../auth-config';\n \n\n@Component({\n  selector: 'td-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.css']\n})\nexport class RegisterComponent implements OnInit {\n\n  loading = false;\n  submitted = false;\n  returnUrl: string;\n  error = ''; \n  registerForm: FormGroup;\n \n  custClass = '';\n  frmShow  = true;\n  public loginURL: string = (this.authconfig.loginURL) ? this.authconfig.loginURL :'login';\n  public regSuccessMsg: string = (this.authconfig.regSuccessMsg) ? this.authconfig.regSuccessMsg :'Successfully Submitted';\n  @Input() loginBtnText: String = 'Login';\n  @Input() RegBtnText: String = 'Register';\n  @Input() heading: String = 'User Register';\n\n\n\n\n  constructor(\n    public fb: FormBuilder, \n    public route: ActivatedRoute,\n    public router: Router,\n    public authenticationService: AuthenticationService,\n    @Inject(AuthConfigService) public authconfig: AuthConfig\n  ) { }\n\n  \n  // get controll value for form validatation \n  get f() { return this.registerForm.controls; } \n\n/**\n * @ Method to do register\n * @ input: the required fields like username, email, password etc\n * @ output: objservable\n */\n  onSubmit(){\n    this.submitted = true;\n\n\n    if(this.registerForm.invalid && this.userExist == false){\n      console.log('Reg Form Error');\n      return ;\n    }   \n\n    this.loading = true;\n    this.authenticationService.register(this.f.firstName.value, this.f.lastName.value, this.f.email.value, this.f.password.value, 'email', '')\n      .pipe(first())\n      .subscribe(\n          resp => { \n            if(resp.errorCode ==null){\n              this.custClass = 'success'; \n              this.frmShow = false;              \n            }else if(resp.errorCode == 'user_exist'){\n              this.userExist = true;  \n            }else{\n              this.error = 'Something wrong';              \n            }            \n          },\n          error => {\n              this.error = error;\n              this.loading = false;\n          });\n      //this.registerForm.reset(); \n}\n\n  ngOnInit() {\n    this.registerForm = this.fb.group(\n        {\n          email: ['', [Validators.required, Validators.email]],\n          firstName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(30)]],\n          lastName: ['', [Validators.required , Validators.minLength(2), Validators.maxLength(30)]],\n          password: ['', [Validators.required, Validators.minLength(6), Validators.maxLength(30)]],\n          confirmPassword: ['', [Validators.required, Validators.minLength(6), Validators.maxLength(30)]]\n        },\n        {\n          validator: [MustMatch('password', 'confirmPassword')]\n        }\n    )\n  };\n  userExist: boolean = false;\n  curEmail: string = '';\n  \n  async isEmailUnique(email: string) { \n    \n    if(this.f.firstName.value ==\"\" && this.f.lastName.value==\"\"){\n      return false;\n    }  \n\n    if(email == this.curEmail){\n      return false;\n    }else{\n      this.curEmail = email;\n    } \n\n    await this.authenticationService.checkEmailExis(email)\n    .pipe(\n      first(), \n      debounceTime(200),\n      distinctUntilChanged()\n    )\n    .subscribe(\n      resp => {  \n        if(resp.message !='ok'){ \n          this.userExist = true; \n        }else{\n          this.userExist = false; \n        }\n      },\n      error => {\n          this.error = error;\n          this.loading = false;\n      }\n    ); \n  }\n}\n","import { FormGroup } from '@angular/forms';\nimport { AuthenticationService } from '../_services/authentication.service';\nimport { first } from 'rxjs/operators';\nimport { debounceTime } from 'rxjs/operators';\n\n\n// custom validator to check that two fields match\n\n\nexport function MustMatch(controlName: string, matchingControlName: string) {\n    return (formGroup: FormGroup) => {\n        const control = formGroup.controls[controlName];\n        const matchingControl = formGroup.controls[matchingControlName];\n\n        if (matchingControl.errors && !matchingControl.errors.mustMatch) {\n            // return if another validator has already found an error on the matchingControl\n            return;\n        }\n\n        // set error on matchingControl if validation fails\n        if (control.value !== matchingControl.value) {\n            matchingControl.setErrors({ mustMatch: true });\n        } else {\n            matchingControl.setErrors(null);\n        }\n    }\n}\n/*\nexport function userExist(controlName: string) {\n    return (formGroup: FormGroup, authServ : AuthenticationService) => {\n        const userControl = formGroup.controls[controlName]; \n\n        if (userControl.errors && !userControl.errors.userExist) {\n            // return if another validator has already found an error on the matchingControl\n            return;\n        }\n         \n        authServ.checkEmailExis(userControl)\n        .pipe(first(), debounceTime(200))\n        .subscribe(\n            resp => {\n               return resp; \n            },\n            error => { \n                this.error = error;\n                this.loading = false;\n            });\n\n        // set error on matchingControl if validation fails\n        if (userControl.value !== 'amarjeet') {\n            userControl.setErrors({ userExist: true });\n        } else {\n            userControl.setErrors(null);\n        }\n    }\n}*/","export class SocialUser {\n    provider: string;\n    id: string;\n    email: string;\n    name: string;\n    photoUrl: string;\n    firstName: string;\n    lastName: string;\n    authToken: string;\n    idToken: string;\n    photoURL: string;\n    authorizationCode: string;\n    /**\n     * Contains the entire object returned from the Facebook API based on the fields you requested.\n     * Only available for the Facebook provider.\n     * Refer to the Graph API for details: https://developers.facebook.com/docs/graph-api\n     */\n    facebook?: any;\n    /**\n     * Contains the entire object returned from the Linked In API based on the fields you requested.\n     * Only available for the Linked In provider.\n     * Refer to the Linked In docs: https://developer.linkedin.com/docs/fields\n     */\n    linkedIn?: any;\n}\n","import { Component, OnInit, Input, Inject } from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport { AuthenticationService } from '../_services/authentication.service';\nimport { AuthConfig, AuthConfigService } from '../auth-config';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { throwError, Observable } from 'rxjs';\nimport { SocialUser } from '../_services/user';\ndeclare var FB: any;\n\n@Component({\n  selector: 'lib-fblogin',\n  templateUrl: './fblogin.component.html',\n  styleUrls: ['./fblogin.component.css']\n})\nexport class FbloginComponent implements OnInit {\n\n  public currentUser: Observable<SocialUser>;\n\n  loading = false;\n  submitted = false;\n  returnUrl: string;\n  error = '';\n\n  @Input() btnText: String = 'SignIn/SignUp with ';\n  constructor(@Inject(AuthConfigService) private authconfig: AuthConfig, private router: Router, private route: ActivatedRoute, private authenticationService: AuthenticationService) {\n\n  }\n\n  ngAfterViewInit() {\n    let $fbProvider = this.authconfig.FBProvider;\n    (window as any).fbAsyncInit = function () {\n      FB.init({\n        appId: $fbProvider,\n        autoLogAppEvents: true,\n        cookie: true,\n        xfbml: true,\n        version: 'v3.3'\n      });\n    };\n  }\n  ngOnInit() {\n\n    (function (d, s, id) {\n      var js, fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) { return; }\n      js = d.createElement(s); js.id = id;\n      js.async = false;\n      js.src = \"//connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    }(document, 'script', 'facebook-jssdk'));\n  }\n\n  /**\n   * fbLogin method to check or do  facebook login\n   * @input: none\n   * @ouput: object\n   * \n   */\n\n  fbLogin() {\n    this.getFbUserData().then(data => {\n      this.loading = true;\n      this.authenticationService.fbRegister(data)\n        .pipe(first())\n        .subscribe(\n          resp => {\n\n            this.authenticationService.FBlogin(data).subscribe(result => {\n              this.router.navigate([this.authconfig.AfterLoginURL]);\n            });\n          },\n          error => {\n            this.error = error;\n            this.loading = false;\n          });\n\n    }).catch(error => {\n      console.log(error)\n    })\n  }\n\n  /**\n   * @method: Facebook Login\n   * @input: Facebook App Id\n   * @outpt: Object User data \n   */\n  getFbUserData() {\n    return new Promise((\n      function (resolve, reject) {\n        FB.login((function (response) {\n\n          if (response.authResponse) {\n            var authResponse_2 = response.authResponse;\n            FB.api(\"/me\", { locale: 'en_US', fields: 'id,first_name,last_name,email,link,gender,locale,picture' }, (\n              function (fbUser) {\n\n                var user = new SocialUser();\n                user.id = fbUser.id;\n                user.email = fbUser.email;\n                user.photoURL = 'https://graph.facebook.com/' + fbUser.id + '/picture?type=normal';\n                user.firstName = fbUser.first_name;\n                user.lastName = fbUser.last_name;\n                user.authToken = authResponse_2.accessToken;\n                user.facebook = fbUser;\n                user.provider = \"FACEBOOK\";\n                resolve(user);\n              }));\n          }\n          else {\n            reject('User cancelled login or did not fully authorize.');\n          }\n        }), { scope: 'email' });\n      }\n    ));\n  }\n}","import { Component, OnInit, Input, Inject } from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport { AuthenticationService } from '../_services/authentication.service';\nimport { AuthConfig, AuthConfigService } from '../auth-config';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { SocialUser } from '../_services/user';\ndeclare var gapi : any;\n@Component({\n  selector: 'lib-gmaillogin',\n  templateUrl: './gmaillogin.component.html',\n  styleUrls: ['./gmaillogin.component.css']\n})\nexport class GmailloginComponent implements OnInit {\n\n  @Input() btnText: String = 'SignIn/SignUp with ';\n  constructor(private authenticationService: AuthenticationService,\n    @Inject(AuthConfigService) private authconfig: AuthConfig,private router: Router,  private route: ActivatedRoute) { }\n\n    loading = false;\n    submitted = false;\n    returnUrl: string;\n    error = '';\n\n    ngOnInit() {\n\n      // get return url from route parameters or default to '/'\n      this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || this.authconfig.AfterLoginURL;\n      this.initialize().then(response => {\n          \n      }).catch(error => {\n          console.log(error,'error')\n      });\n      \n   }\n\n initialize = function () {\n   let clientSecretId = this.authconfig.gmailProvider;\n   let G_ApiKey = this.authconfig.gmailAPIKey;\n     var _this = this;\n     return new Promise((\n       function (resolve, reject) {\n         _this.loadScript(clientSecretId, 'https://apis.google.com/js/platform.js', (\n           function () {\n             gapi.load('auth2', (\n               \n             function () {\n                 _this.auth2 = gapi.auth2.init({\n                  apiKey: G_ApiKey,\n                  clientId: clientSecretId,\n                  scope: 'https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/plus.me'\n                 });\n                 _this.auth2.then((\n                   function () {\n                     //_this._readyState.next(true);\n                     resolve();\n                 })).catch((\n                 function (err) {\n                     reject(err);\n                 }));\n             }));\n         }));\n     }));\n };\n \n  \n  loadScript(id, src, onload, async, inner_text_content) {\n      if (async === void 0) { async = true; }\n      if (inner_text_content === void 0) { inner_text_content = ''; }\n      if (document.getElementById(id)) {\n          return;\n      }\n      src= 'https://apis.google.com/js/platform.js';\n      \n      var signInJS = document.createElement('script');\n      signInJS.async = true;\n      signInJS.src = src;\n      signInJS.onload = onload;\n      signInJS.text = 'Gmail Login'; // LinkedIn\n      document.head.appendChild(signInJS);\n  };\n\n  signInWithGoogle () { \n      const isSignedIn = gapi.auth2.getAuthInstance().isSignedIn.get();\n     /*  if(isSignedIn) {\n        let profile = this.getGoogleProfile();\n        this.authenticationService.register(profile.firstName, profile.lastName, profile.email, profile.id, profile.provider, profile.photoURL)\n        .pipe(first())\n        .subscribe(\n            resp => {\n              this.authenticationService.login(profile.email,profile.id).subscribe(result =>{\n                this.router.navigate([this.authconfig.AfterLoginURL]);\n              });\n            },\n            error => {\n                console.log(error)\n                this.error = error;\n                this.loading = false;\n            });\n      }else{ */\n        gapi.auth2.getAuthInstance().signIn().then(users =>{\n          let profile = this.getGoogleProfile();\n\n          this.authenticationService.register(profile.firstName, profile.lastName, profile.email, profile.id, profile.provider, profile.photoURL)\n          .pipe(first())\n          .subscribe(\n              resp => {\n                this.authenticationService.login(profile.email,profile.id).subscribe(result =>{\n                  this.router.navigate([this.authconfig.AfterLoginURL]);\n                });\n              },\n              error => {\n                  console.log(error)\n                  this.error = error;\n                  this.loading = false;\n              });\n\n        }).catch( error => {\n            console.log('Cancelled');\n        })\n      //}\n  }\n\n  /**\n   * get Google user profile\n   * @input: token\n   * @output: object\n   */\n  getGoogleProfile(){\n      var profile = gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();\n      \n      var token = '';//gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse(true).access_token;\n      var backendToken = '';//gapi.auth2.currentUser.getAuthInstance().get().getAuthResponse(true).id_token;    \n      var user = new SocialUser();\n      user.id = profile.getId();\n      user.email = profile.getEmail();\n      user.photoURL = profile.getImageUrl();\n      user.firstName = profile.getGivenName();\n      user.lastName = profile.getFamilyName();;\n      user.authToken = token;\n      user.idToken = backendToken;\n      user.provider = \"GOOGLE\";\n      return user;\n  }\n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { AuthenticationService } from './../_services/authentication.service';\nimport { Router } from '@angular/router';\nimport { AuthConfig, AuthConfigService } from '../auth-config';\n \n@Component({\n  selector: 'td-log-out',\n  templateUrl: './log-out.component.html',\n  styleUrls: ['./log-out.component.css']\n})\nexport class LogOutComponent implements OnInit {\n\n  constructor( private authenticationService: AuthenticationService, private router: Router,  @Inject(AuthConfigService) private authconfig: AuthConfig) { }\n\n\n  ngOnInit() {\n  }\n  /**\n   * @method: SignOut\n   * @input: none\n   * @output: boolean\n   */\n\n  signOut(){\n    this.authenticationService.logout();                \n    this.router.navigate(['/']);\n  }\n\n}\n","import { Component, OnInit, Input, Inject } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AuthenticationService } from '../_services/authentication.service';\nimport { AuthConfig, AuthConfigService } from '../auth-config';\nimport { first } from 'rxjs/operators';\nimport { SocialUser } from '../_services/user';\n\n@Component({\n  selector: 'td-insta-login',\n  templateUrl: './insta-login.component.html',\n  styleUrls: ['./insta-login.component.css']\n})\nexport class InstaLoginComponent implements OnInit {\n  public accessToken = null;\n  private IGClientid = '';\n  private IGRedirectURL = '';\n  @Input() btnText: String = 'Instagram Login';\n\n\n  // constructor start here \n  constructor( private router: Router,\n    private authenticationService: AuthenticationService,    \n    @Inject(AuthConfigService) private authconfig: AuthConfig ) {}\n\n  //ngOnInit called at page load// \n  \n  ngOnInit() {\n    this.IGClientid = this.authconfig.IGClientid;\n    this.IGRedirectURL = (this.authconfig.IGRedirectURL !='') ? this.authconfig.IGRedirectURL : this.authconfig.loginURL ;\n  }\n \n\n  /**\n   * @Method: open the pop up to authorized the user\n   * @input: client Id\n   * @output: access token\n   * \n   */\n  instaSignIn(){    \n\n    this.authenticateInstagram(\n      this.IGClientid,\n      this.IGRedirectURL\n  );\n  return false;\n\n  }\n\n/**\n * @method to open the popup and authenticate the Instagram User\n * @param instagramClientId \n * @param instagramRedirectUri\n * @output user data in object\n */\n\nauthenticateInstagram (instagramClientId, instagramRedirectUri) {\n  let that = this;\n    // Pop-up window size, change if you want\n    let popupWidth = 700,\n        popupHeight = 500,\n        popupLeft = (window.screen.width - popupWidth) / 2,\n        popupTop = (window.screen.height - popupHeight) / 2;\n    // Url needs to point to instagram_auth.php\n    let popup = window.open('instagram_auth.php', '', 'width='+popupWidth+',height='+popupHeight+',left='+popupLeft+',top='+popupTop+'');\n    popup.onload = () =>{\n        // Open authorize url in pop-up\n        if(window.location.hash.length == 0) {\n            popup.open('https://instagram.com/oauth/authorize/?client_id='+instagramClientId+'&redirect_uri='+instagramRedirectUri+'&response_type=token', '_self');\n        }\n        // An interval runs to get the access token from the pop-up\n        let interval = setInterval(() => {\n            try {\n                // Check if hash exists                \n               if(popup.location.hash.length) {\n                    // Hash found, that includes the access token\n                   clearInterval(interval);                  \n                   that.accessToken = popup.location.hash.slice(14); //slice #access_token= from string                                   \n                    popup.close()\n                    that.login_callback();                   \n                   \n                }\n            }\n            catch(evt) {\n              console.log('in err');\n                // Permission denied\n            }\n        }, 100);\n    };\n};\n\n/**\n * @method Instagram Auth call back \n * @param none\n * @output json object\n */\n  login_callback(){     \n    if(this.accessToken){   \n      this.authenticationService.getInstaUserData(this.accessToken).subscribe( result => {\n        if(result){\n          let profile = result.data;\n          let fullName = profile.full_name.split(\" \");\n          \n          // calling the user registration method \n          this.authenticationService.register(fullName[0], (fullName[1] ? fullName[1] : '.'), profile.username, profile.id, 'INSTAGRAM', profile.profile_picture)\n          .pipe(first())\n          .subscribe(\n              resp => {\n\n                // after successs full registration, just called the login method.\n                this.authenticationService.login(profile.username,profile.id).subscribe(result =>{\n                  this.router.navigate([this.authconfig.AfterLoginURL]);\n                });\n              },\n              error => {\n                  console.log(error);\n              });\n        }\n        \n         \n      });       \n\n    }\n    \n  }\n \n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { LoginComponent } from '../login/login.component';\nimport { FormBuilder } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthenticationService } from '../_services/authentication.service';\nimport { AuthConfigService, AuthConfig } from '../auth-config';\n\n@Component({\n  selector: 'ion-login',\n  templateUrl: './ion-login.component.html',\n  styleUrls: ['./ion-login.component.css']\n})\nexport class IonLoginComponent extends LoginComponent implements OnInit {\n\n  constructor(public formBuilder: FormBuilder,\n    public route: ActivatedRoute,\n    public router: Router,\n    public authenticationService: AuthenticationService,\n    @Inject(AuthConfigService) public authconfig: AuthConfig) { \n    super(\n      formBuilder,\n      route,\n      router,\n      authenticationService,\n      authconfig\n    );\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n}\n","import { Component, OnInit, Inject } from '@angular/core';\n\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthConfig, AuthConfigService } from '../auth-config';\nimport { FormBuilder } from '@angular/forms';\nimport { AuthenticationService } from '../_services/authentication.service';\nimport { RegisterComponent } from '../register/register.component';\n\n@Component({\n  selector: 'ion-reg',\n  templateUrl: './ion-reg.component.html',\n  styleUrls: ['./ion-reg.component.css']\n})\nexport class IonRegComponent extends RegisterComponent{\n\n  \n  constructor(\n   \n    public fb: FormBuilder, \n    public route: ActivatedRoute,\n    public router: Router,\n    public authenticationService: AuthenticationService,\n    @Inject(AuthConfigService) public authconfig: AuthConfig\n    ) { \n      super(\n        fb,\n        route,\n        router,\n        authenticationService,\n        authconfig\n      )\n    }\n\n  ngOnInit() {\n    super.ngOnInit(); \n  }\n\n}\n","import { NgModule, InjectionToken, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';  \nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { JwtInterceptor } from '../lib/_helpers/jwt.interceptor';\nimport { ErrorInterceptor } from '../lib/_helpers/error.interceptor';\nimport { AioAuthV01Component } from './aio-auth-v01.component';\nimport { LoginComponent } from './login/login.component';\nimport { RegisterComponent } from './register/register.component';\nimport { FbloginComponent } from './fblogin/fblogin.component';\nimport { GmailloginComponent } from './gmaillogin/gmaillogin.component';\nimport { AioAuthV01Service } from './aio-auth-v01.service'; \nimport { AuthConfig, AuthConfigService } from './auth-config';\nimport { LogOutComponent } from './log-out/log-out.component';\nimport { InstaLoginComponent } from './insta-login/insta-login.component';\nimport { IonLoginComponent } from './ion-login/ion-login.component';\nimport { IonicModule } from '@ionic/angular';\nimport { IonRegComponent } from './ion-reg/ion-reg.component';\n@NgModule({\n  declarations: [AioAuthV01Component, LoginComponent, RegisterComponent, FbloginComponent, GmailloginComponent, LogOutComponent, InstaLoginComponent, IonLoginComponent, IonRegComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    RouterModule,\n    IonicModule\n  ],\n  providers: [\n    { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true },\n    { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true },\n    \n  ],\n  exports: [AioAuthV01Component, LoginComponent, RegisterComponent, FbloginComponent, GmailloginComponent, LogOutComponent, InstaLoginComponent, IonLoginComponent, IonRegComponent]\n})\nexport class AioAuthV01Module {\n  static forRoot(config: AuthConfig): ModuleWithProviders {\n   \n    return {\n      ngModule: AioAuthV01Module,\n      providers: [\n        AioAuthV01Service,\n        {\n          provide: AuthConfigService,\n          useValue: config\n        }\n      ]\n    };\n  }\n  \n }\n","import { Injectable } from '@angular/core';\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\n@Injectable({ providedIn: 'root' })\nexport class AuthGuard implements CanActivate {\n\n    constructor(private router: Router) { }\n\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n        if (localStorage.getItem('currentUser')) {\n            // logged in so return true\n            return true;\n        }\n\n        // not logged in so redirect to login page with the return url\n        this.router.navigate(['/login'], { queryParams: { returnUrl: state.url }});\n        return false;\n    }\n}"]}